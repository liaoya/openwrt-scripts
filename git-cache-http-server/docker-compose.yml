version: "3.0"

volumes:
  data:
    driver: local

services:
  git-cache-http-server:
    build:
      context: .
      args:
        - http_proxy=http://10.245.91.190:1080
        - https_proxy=http://10.245.91.190:1080
        - no_proxy=localhost,127.0.0.1,edu.cn,mirrors.aliyun.com,registry.npm.taobao.org,mirrors.tencent.com
        - npm_config_registry=https://registry.npm.taobao.org
    environment:
      - NODE_ENV=production
      - http_proxy=http://10.245.91.190:1080
      - https_proxy=http://10.245.91.190:1080
      - no_proxy=localhost,127.0.0.1
    ports:
      - "9080:8080"
    restart: always
    volumes:
      - data:/var/cache/git
